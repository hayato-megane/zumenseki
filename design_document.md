

## サブスクリプション機能の設計

### 1. サブスクリプションプラン

- **無料プラン (Free Plan)**:
  - PDFのアップロードと閲覧
  - 面積・長さ測定機能（制限付き：例：月間5回まで、または測定数5個まで）
  - 測定結果の保存（制限付き：例：最新のPDF1つのみ、または測定数10個まで）
  - エクスポート機能（制限付き：例：透かし入り、またはエクスポート不可）

- **有料プラン (Premium Plan)**:
  - 無料プランの全機能
  - 面積・長さ測定機能の無制限利用
  - 測定結果の無制限保存
  - エクスポート機能の無制限利用（透かしなし）
  - 優先サポート

### 2. ユーザー認証

- NextAuth.jsなどのライブラリを利用し、メールアドレス/パスワード、またはソーシャルログイン（Googleなど）を実装。
- ユーザーのサブスクリプション状態をデータベースで管理。

### 3. 決済システム

- **Stripe** を利用して、定期的な支払い（月額課金）を処理。
- Stripe CheckoutまたはStripe Billingを導入し、セキュアな決済フローを実現。

### 4. バックエンドAPI

- **Next.js API Routes** または **独立したNode.js/Pythonバックエンド** を利用。
- ユーザー登録、ログイン、ログアウトAPI
- サブスクリプション状態の取得・更新API
- Stripe Webhookエンドポイント（決済イベントの処理）
- 測定回数や保存数などの利用制限を管理するAPI

### 5. フロントエンドUI

- ログイン/サインアップページ
- プラン選択ページ
- 支払い情報入力ページ（Stripe Checkoutへのリダイレクトなど）
- ユーザーダッシュボード（サブスクリプション状態、利用状況の表示、プラン変更/キャンセル）
- 測定機能利用時の制限通知UI


